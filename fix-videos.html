<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Fix Abaya Videos</title>
</head>
<body>
<h3>Fixing Abaya Videosâ€¦ check console</h3>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
/* FIREBASE INIT */
firebase.initializeApp({
  apiKey:"AIzaSyAxJI4LaZu5AQyk4jJ0LTthxCGXQeJBaRQ",
  authDomain:"qatri-abaya.firebaseapp.com",
  projectId:"qatri-abaya"
});

const db = firebase.firestore();

/* ðŸ”¥ ALL CLOUDINARY VIDEO URLS (MIXED ORDER IS OK) */
const videoUrls = [
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610769/abaya9_xf6rhv.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610783/abaya8_hdhqwy.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610766/abaya7_y2sfva.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610765/abaya6_vxurxe.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610762/abaya5_e3zw0l.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610769/abaya4_etn7hr.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610841/abaya46_id1csb.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610840/abaya45_qmlxvh.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610834/abaya44_potgb4.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610835/abaya43_ujoqvp.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610828/abaya42_kvkmey.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610834/abaya41_ukxfqp.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610831/abaya40_c0ccao.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610759/abaya3_k4dlsi.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610825/abaya39_ymsmjg.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610827/abaya38_vxunmw.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610837/abaya37_hj7teh.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610824/abaya36_ajjqmj.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610824/abaya35_wxxuqq.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610825/abaya34_ajwnab.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610819/abaya33_z2p22h.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610816/abaya32_kc2tg3.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610817/abaya31_yfnztd.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610817/abaya30_wzq2tv.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610772/abaya2_s3uh7s.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610816/abaya29_w0idbd.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610819/abaya28_cc3bga.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610813/abaya27_cr38bx.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610800/abaya26_di4ta3.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610807/abaya25_yi5onf.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610795/abaya24_bjoe2z.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610809/abaya23_aasut7.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610803/abaya22_kzy1vq.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610789/abaya21_xmaz3m.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610804/abaya20_er50fc.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610766/abaya1_c6arfy.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610799/abaya19_ny3oye.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610789/abaya18_l4vfpy.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610783/abaya17_elep7v.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610787/abaya16_pxtf8f.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610781/abaya15_ghjgx6.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610784/abaya14_qr4upa.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610782/abaya13_wemho5.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610773/abaya12_dx3nuo.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610773/abaya11_d5yz8g.mp4",
"https://res.cloudinary.com/dsdvlwxa4/video/upload/v1769610774/abaya10_gsplzo.mp4"
];

/* ðŸ”§ BUILD MAP: abayaNumber -> URL */
const videoMap = {};
videoUrls.forEach(url=>{
  const match = url.match(/abaya(\d+)/);
  if(match){
    videoMap[match[1]] = url;
  }
});

(async ()=>{
  const snap = await db.collection("products").get();
  let updated = 0;

  for(const doc of snap.docs){
    const name = doc.data().name || "";
    const match = name.match(/Abaya (\d+)/);
    if(match && videoMap[match[1]]){
      await doc.ref.update({ video: videoMap[match[1]] });
      console.log("Updated:", name);
      updated++;
    }
  }

  alert("âœ… Videos fixed for " + updated + " products");
})();
</script>

</body>
</html>
